import{a as s}from"./chunk-GUCFFKTL.js";import{a as n}from"./chunk-NJU4TC5B.js";import{d as g}from"./chunk-H4FMBZ3H.js";function m({ledgerType:l,ledgerId:a}){let[r,i]=n(!1),[t,c]=n(null),[d,u]=n(null),[h,o]=n(!1);return s("div",{class:"border-2 border-error rounded-lg p-6 bg-error/5",children:[s("div",{class:"flex items-center gap-2 mb-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-6 h-6 text-error",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),s("h3",{class:"text-lg font-bold text-error",children:"Danger Zone"})]}),s("div",{class:"mb-4",children:[s("h4",{class:"font-semibold mb-1",children:"Hub \u3068\u306E\u5F37\u5236\u518D\u540C\u671F"}),s("p",{class:"text-sm text-base-content/70",children:"\u901A\u5E38\u3001\u4ED5\u8A33\u306F\u627F\u8A8D\u6642\u306B\u81EA\u52D5\u3067 Hub \u306B\u540C\u671F\u3055\u308C\u307E\u3059\u3002 \u3053\u306E\u30DC\u30BF\u30F3\u306F Hub \u3068\u306E\u30C7\u30FC\u30BF\u306B\u30BA\u30EC\u304C\u751F\u3058\u305F\u5834\u5408\u306B\u306E\u307F\u4F7F\u7528\u3057\u3066\u304F\u3060\u3055\u3044\u3002 \u627F\u8A8D\u6E08\u307F\u306E\u5168\u4ED5\u8A33\u304C Hub \u306B\u518D\u9001\u4FE1\u3055\u308C\u307E\u3059\u3002"})]}),h?s("div",{class:"flex flex-col gap-3",children:[s("p",{class:"text-sm font-semibold text-error",children:"\u672C\u5F53\u306B\u518D\u540C\u671F\u3092\u5B9F\u884C\u3057\u307E\u3059\u304B\uFF1F"}),s("div",{class:"flex gap-2",children:[s("button",{onClick:async()=>{i(!0),u(null),c(null),o(!1);try{let e=new URLSearchParams;l&&e.set("type",l),a&&e.set("ledger_id",a),e.set("force","true");let p=await fetch(`/api/sync?${e.toString()}`,{method:"POST"}),v=await p.json();if(!p.ok)throw new Error(v.error||"\u540C\u671F\u306B\u5931\u6557\u3057\u307E\u3057\u305F");c(v)}catch(e){u(e instanceof Error?e.message:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F")}finally{i(!1)}},disabled:r,class:`btn btn-error ${r?"loading":""}`,children:r?s(g,{children:[s("span",{class:"loading loading-spinner loading-sm"}),"\u518D\u540C\u671F\u4E2D..."]}):"\u306F\u3044\u3001\u518D\u540C\u671F\u3057\u307E\u3059"}),s("button",{onClick:()=>o(!1),disabled:r,class:"btn btn-ghost",children:"\u30AD\u30E3\u30F3\u30BB\u30EB"})]})]}):s("button",{onClick:()=>o(!0),disabled:r,class:"btn btn-outline btn-error",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24","stroke-width":"1.5",stroke:"currentColor",class:"w-5 h-5",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round",d:"M16.023 9.348h4.992v-.001M2.985 19.644v-4.992m0 0h4.992m-4.993 0 3.181 3.183a8.25 8.25 0 0 0 13.803-3.7M4.031 9.865a8.25 8.25 0 0 1 13.803-3.7l3.181 3.182m0-4.991v4.99"})}),"\u5F37\u5236\u518D\u540C\u671F\u3092\u5B9F\u884C"]}),d&&s("div",{class:"alert alert-error mt-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M10 14l2-2m0 0l2-2m-2 2l-2-2m2 2l2 2m7-2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("span",{children:d})]}),t&&s("div",{class:"alert alert-success mt-4",children:[s("svg",{xmlns:"http://www.w3.org/2000/svg",class:"stroke-current shrink-0 h-6 w-6",fill:"none",viewBox:"0 0 24 24",children:s("path",{"stroke-linecap":"round","stroke-linejoin":"round","stroke-width":"2",d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),s("div",{children:[s("p",{class:"font-bold",children:"\u518D\u540C\u671F\u5B8C\u4E86!"}),s("p",{class:"text-sm",children:["\u4F5C\u6210: ",t.created," \u4EF6 / \u66F4\u65B0: ",t.updated," \u4EF6 / \u30B9\u30AD\u30C3\u30D7:"," ",t.skipped," \u4EF6",t.errors>0&&s("span",{class:"text-error",children:[" / \u30A8\u30E9\u30FC: ",t.errors," \u4EF6"]})]})]})]})]})}export{m as default};
