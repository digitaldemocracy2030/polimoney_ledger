import{a as e}from"./chunk-GUCFFKTL.js";import{a as n}from"./chunk-NJU4TC5B.js";import{d as m}from"./chunk-H4FMBZ3H.js";var y={political_party:"\u653F\u515A",support_group:"\u5F8C\u63F4\u4F1A",fund_management:"\u8CC7\u91D1\u7BA1\u7406\u56E3\u4F53",other:"\u305D\u306E\u4ED6\u306E\u653F\u6CBB\u56E3\u4F53"};function I({hubOrganizations:v}){let[s,g]=n("select"),[i,w]=n(null),[c,x]=n(""),[p,r]=n(!1),[f,l]=n(null),[u,z]=n(""),[b,O]=n("all"),h=v.filter(t=>{let a=!u||t.name.toLowerCase().includes(u.toLowerCase()),o=b==="all"||t.type===b;return a&&o});return e("form",{onSubmit:async t=>{t.preventDefault(),r(!0),l(null);try{let a=c;if(s==="select"){if(!i){l("\u653F\u6CBB\u56E3\u4F53\u3092\u9078\u629E\u3057\u3066\u304F\u3060\u3055\u3044"),r(!1);return}let d=v.find(k=>k.id===i);if(!d){l("\u9078\u629E\u3055\u308C\u305F\u653F\u6CBB\u56E3\u4F53\u304C\u898B\u3064\u304B\u308A\u307E\u305B\u3093"),r(!1);return}a=d.name}else if(!c.trim()){l("\u653F\u6CBB\u56E3\u4F53\u540D\u3092\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"),r(!1);return}let o=await fetch("/api/organizations",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({name:a,hub_organization_id:s==="select"?i:void 0})});if(!o.ok){let d=await o.json();throw new Error(d.error||"\u653F\u6CBB\u56E3\u4F53\u53F0\u5E33\u306E\u4F5C\u6210\u306B\u5931\u6557\u3057\u307E\u3057\u305F")}let S=await o.json();window.location.href=`/organizations/${S.organization_id}/ledger`}catch(a){l(a instanceof Error?a.message:"\u30A8\u30E9\u30FC\u304C\u767A\u751F\u3057\u307E\u3057\u305F")}finally{r(!1)}},children:[f&&e("div",{class:"alert alert-error mb-4",children:e("span",{children:f})}),e("div",{class:"tabs tabs-boxed mb-6",children:[e("button",{type:"button",class:`tab ${s==="select"?"tab-active":""}`,onClick:()=>g("select"),children:"\u767B\u9332\u6E08\u307F\u306E\u653F\u6CBB\u56E3\u4F53\u304B\u3089\u9078\u629E"}),e("button",{type:"button",class:`tab ${s==="create"?"tab-active":""}`,onClick:()=>g("create"),children:"\u65B0\u898F\u306B\u767B\u9332"})]}),s==="select"?e(m,{children:[e("div",{class:"flex flex-col md:flex-row gap-4 mb-4",children:[e("div",{class:"form-control flex-1",children:e("input",{type:"text",placeholder:"\u653F\u6CBB\u56E3\u4F53\u540D\u3067\u691C\u7D22...",class:"input input-bordered",value:u,onInput:t=>z(t.target.value)})}),e("div",{class:"form-control",children:e("select",{class:"select select-bordered",value:b,onChange:t=>O(t.target.value),children:[e("option",{value:"all",children:"\u3059\u3079\u3066\u306E\u7A2E\u5225"}),Object.entries(y).map(([t,a])=>e("option",{value:t,children:a},t))]})})]}),e("div",{class:"max-h-96 overflow-y-auto border rounded-lg mb-6",children:h.length===0?e("div",{class:"p-8 text-center text-base-content/60",children:"\u8A72\u5F53\u3059\u308B\u653F\u6CBB\u56E3\u4F53\u304C\u3042\u308A\u307E\u305B\u3093"}):h.map(t=>e("label",{class:`flex items-center gap-4 p-4 cursor-pointer hover:bg-base-200 border-b ${i===t.id?"bg-primary/10":""}`,children:[e("input",{type:"radio",name:"organization",class:"radio radio-primary",checked:i===t.id,onChange:()=>w(t.id)}),e("div",{class:"flex-1",children:[e("div",{class:"font-medium",children:t.name}),e("div",{class:"flex gap-2 mt-1",children:e("span",{class:"badge badge-sm badge-info",children:y[t.type]||t.type})})]})]},t.id))}),e("div",{class:"alert alert-warning mb-6",children:e("span",{children:"\u8A72\u5F53\u3059\u308B\u653F\u6CBB\u56E3\u4F53\u304C\u306A\u3044\u5834\u5408\u306F\u3001\u300C\u65B0\u898F\u306B\u767B\u9332\u300D\u30BF\u30D6\u304B\u3089\u767B\u9332\u3057\u3066\u304F\u3060\u3055\u3044\u3002"})})]}):e(m,{children:[e("div",{class:"mb-6",children:e("div",{class:"form-control",children:[e("label",{class:"label",children:e("span",{class:"label-text",children:["\u653F\u6CBB\u56E3\u4F53\u540D ",e("span",{class:"text-error",children:"*"})]})}),e("input",{type:"text",placeholder:"\u4F8B: \u5C71\u7530\u592A\u90CE\u5F8C\u63F4\u4F1A",class:"input input-bordered",value:c,onInput:t=>x(t.target.value),required:!0}),e("label",{class:"label",children:e("span",{class:"label-text-alt text-base-content/70",children:"\u6B63\u5F0F\u540D\u79F0\u3067\u5165\u529B\u3057\u3066\u304F\u3060\u3055\u3044"})})]})}),e("div",{class:"alert alert-info mb-6",children:[e("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",class:"stroke-current shrink-0 w-6 h-6",children:e("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),e("span",{children:"\u65B0\u898F\u4F5C\u6210\u3057\u305F\u653F\u6CBB\u56E3\u4F53\u306F\u307E\u305A\u53F0\u5E33\u3068\u3057\u3066\u767B\u9332\u3055\u308C\u307E\u3059\u3002Hub \u3078\u306E\u516C\u5F0F\u767B\u9332\u306F\u5225\u9014\u7533\u8ACB\u304C\u5FC5\u8981\u3067\u3059\u3002"})]})]}),e("div",{class:"flex gap-4",children:[e("a",{href:"/organizations",class:"btn btn-outline",children:"\u30AD\u30E3\u30F3\u30BB\u30EB"}),e("button",{type:"submit",class:`btn btn-primary flex-1 ${p?"loading":""}`,disabled:p||s==="select"&&!i||s==="create"&&!c.trim(),children:p?"\u4F5C\u6210\u4E2D...":"\u653F\u6CBB\u56E3\u4F53\u53F0\u5E33\u3092\u4F5C\u6210"})]})]})}export{I as default};
