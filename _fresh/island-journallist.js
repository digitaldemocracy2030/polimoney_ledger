import{a as t}from"./chunk-GUCFFKTL.js";import{a as f}from"./chunk-NJU4TC5B.js";import"./chunk-H4FMBZ3H.js";function J(a){let r=new Map;if(a)for(let n of a)r.set(n.code,n.name);return n=>r.get(n)||n}function p(a){return new Intl.NumberFormat("ja-JP").format(a)}function w(a){return new Date(a).toLocaleDateString("ja-JP",{year:"numeric",month:"2-digit",day:"2-digit"})}function v(a){return a.reduce((r,n)=>r+n.debit_amount+n.credit_amount,0)}function h(a){let r=a.reduce((s,i)=>s+i.debit_amount,0);return a.reduce((s,i)=>s+i.credit_amount,0)>r?"income":"expense"}function C({journals:a,basePath:r,accountCodes:n}){let[s,i]=f("all"),b=J(n),l=a.filter(e=>s==="all"?!0:e.status===s),x=a.filter(e=>e.status==="draft").length,_=a.filter(e=>e.status==="approved").length,g=l.reduce((e,c)=>{let u=h(c.journal_entries),d=v(c.journal_entries);return u==="income"?e.income+=d:e.expense+=d,e},{income:0,expense:0});return t("div",{children:[t("div",{class:"flex flex-wrap items-center justify-between gap-4 mb-4",children:[t("div",{class:"tabs tabs-boxed",children:[t("button",{class:`tab ${s==="all"?"tab-active":""}`,onClick:()=>i("all"),children:["\u3059\u3079\u3066 (",a.length,")"]}),t("button",{class:`tab ${s==="draft"?"tab-active":""}`,onClick:()=>i("draft"),children:[t("span",{class:"badge badge-warning badge-sm mr-1",children:"\u4E0B\u66F8\u304D"}),x]}),t("button",{class:`tab ${s==="approved"?"tab-active":""}`,onClick:()=>i("approved"),children:[t("span",{class:"badge badge-success badge-sm mr-1",children:"\u627F\u8A8D\u6E08"}),_]})]}),t("div",{class:"text-sm",children:[t("span",{class:"text-primary font-medium",children:["\u53CE\u5165: \xA5",p(g.income)]}),t("span",{class:"mx-2",children:"|"}),t("span",{class:"text-error font-medium",children:["\u652F\u51FA: \xA5",p(g.expense)]})]})]}),l.length===0?t("div",{class:"text-center py-12",children:[t("div",{class:"text-6xl mb-4",children:"\u{1F4CB}"}),t("p",{class:"text-base-content/70",children:"\u4ED5\u8A33\u304C\u3042\u308A\u307E\u305B\u3093"})]}):t("div",{class:"overflow-x-auto",children:t("table",{class:"table table-zebra",children:[t("thead",{children:t("tr",{children:[t("th",{children:"\u53CE\u652F"}),t("th",{children:"\u65E5\u4ED8"}),t("th",{children:"\u501F\u65B9"}),t("th",{children:"\u8CB8\u65B9"}),t("th",{children:"\u6458\u8981"}),t("th",{children:"\u53D6\u5F15\u5148"}),t("th",{class:"text-right",children:"\u91D1\u984D"}),t("th",{children:"\u30B9\u30C6\u30FC\u30BF\u30B9"}),t("th",{})]})}),t("tbody",{children:l.map(e=>{let c=h(e.journal_entries),u=v(e.journal_entries),d=e.journal_entries.filter(o=>o.debit_amount>0),y=e.journal_entries.filter(o=>o.credit_amount>0);return t("tr",{children:[t("td",{children:c==="income"?t("span",{class:"badge badge-primary badge-sm",children:"\u53CE\u5165"}):t("span",{class:"badge badge-error badge-sm",children:"\u652F\u51FA"})}),t("td",{class:"whitespace-nowrap",children:w(e.journal_date)}),t("td",{children:t("div",{class:"text-sm",children:d.map((o,m)=>t("div",{class:"text-primary",children:b(o.account_code)},m))})}),t("td",{children:t("div",{class:"text-sm",children:y.map((o,m)=>t("div",{class:"text-secondary",children:b(o.account_code)},m))})}),t("td",{children:t("div",{class:"max-w-xs truncate",children:e.description})}),t("td",{children:e.contacts?.name||t("span",{class:"text-base-content/50",children:"-"})}),t("td",{class:"text-right font-mono",children:["\xA5",p(u)]}),t("td",{children:e.status==="draft"?t("span",{class:"badge badge-warning badge-sm",children:"\u4E0B\u66F8\u304D"}):t("span",{class:"badge badge-success badge-sm",children:"\u627F\u8A8D\u6E08"})}),t("td",{children:t("a",{href:`/journals/${e.id}`,class:"btn btn-ghost btn-sm",children:"\u8A73\u7D30"})})]},e.id)})})]})})]})}export{C as default};
