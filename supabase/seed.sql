-- =====================================================
-- Ledger ダミーデータ（新構造）
-- =====================================================
-- 
-- 前提:
-- - Hub側に政治家・政治団体のマスタデータが存在すること
-- - テストユーザーがauth.usersに存在すること
--
-- Hub上のID:
-- - 政治家ID: 11111111-1111-1111-1111-111111111111（テスト太郎）
-- - 政治家ID: 22222222-2222-2222-2222-222222222222（テスト花子）
-- - 団体ID: aaaa1111-1111-1111-1111-111111111111（テスト太郎後援会）
-- - 団体ID: aaaa2222-2222-2222-2222-222222222222（テスト花子を応援する会）
--
-- テストユーザーID: 00000000-0000-0000-0000-000000000001
-- =====================================================

-- =====================================================
-- profiles（認証済みユーザー）
-- =====================================================

INSERT INTO profiles (id, hub_politician_id, tos_accepted_at, privacy_policy_accepted_at, verified_email_domain)
VALUES (
    '00000000-0000-0000-0000-000000000001',
    '11111111-1111-1111-1111-111111111111',
    now(),
    now(),
    'test-taro.example.jp'
)
ON CONFLICT (id) DO UPDATE SET
    hub_politician_id = EXCLUDED.hub_politician_id,
    tos_accepted_at = EXCLUDED.tos_accepted_at,
    privacy_policy_accepted_at = EXCLUDED.privacy_policy_accepted_at,
    verified_email_domain = EXCLUDED.verified_email_domain;

-- =====================================================
-- political_organizations（Hub参照付き）
-- =====================================================

INSERT INTO political_organizations (id, owner_user_id, name, hub_organization_id)
VALUES 
    ('aaaa1111-1111-1111-1111-111111111111', '00000000-0000-0000-0000-000000000001', 'テスト太郎後援会', 'aaaa1111-1111-1111-1111-111111111111'),
    ('aaaa2222-2222-2222-2222-222222222222', '00000000-0000-0000-0000-000000000001', 'テスト花子を応援する会', 'aaaa2222-2222-2222-2222-222222222222')
ON CONFLICT (id) DO NOTHING;

-- =====================================================
-- elections（Hub参照付き）
-- =====================================================

INSERT INTO elections (id, owner_user_id, hub_politician_id, election_name, election_date, hub_election_id)
VALUES 
    ('eeee1111-1111-1111-1111-111111111111', '00000000-0000-0000-0000-000000000001', '11111111-1111-1111-1111-111111111111', '2024年 第50回衆議院議員総選挙（テスト）', '2024-10-27', NULL),
    ('eeee2222-2222-2222-2222-222222222222', '00000000-0000-0000-0000-000000000001', '22222222-2222-2222-2222-222222222222', '令和7年東京都知事選挙（テスト）', '2025-07-06', NULL)
ON CONFLICT (id) DO NOTHING;

-- =====================================================
-- contacts（台帳紐付け）
-- =====================================================

INSERT INTO contacts (id, owner_user_id, contact_type, name, address, occupation, organization_id, election_id)
VALUES 
    -- 選挙台帳用の関係者
    ('cccc1111-1111-1111-1111-111111111111', '00000000-0000-0000-0000-000000000001', 'person', '山田 一郎', '東京都渋谷区〇〇1-2-3', '会社員', NULL, 'eeee1111-1111-1111-1111-111111111111'),
    ('cccc2222-2222-2222-2222-222222222222', '00000000-0000-0000-0000-000000000001', 'corporation', '株式会社テスト印刷', '東京都新宿区△△4-5-6', NULL, NULL, 'eeee1111-1111-1111-1111-111111111111'),
    ('cccc3333-3333-3333-3333-333333333333', '00000000-0000-0000-0000-000000000001', 'corporation', '〇〇不動産', '東京都千代田区××7-8-9', NULL, NULL, 'eeee1111-1111-1111-1111-111111111111'),
    -- 政治団体台帳用の関係者
    ('cccc4444-4444-4444-4444-444444444444', '00000000-0000-0000-0000-000000000001', 'person', '山田 一郎', '東京都渋谷区〇〇1-2-3', '会社員', 'aaaa1111-1111-1111-1111-111111111111', NULL),
    ('cccc5555-5555-5555-5555-555555555555', '00000000-0000-0000-0000-000000000001', 'corporation', '株式会社テスト印刷', '東京都新宿区△△4-5-6', NULL, 'aaaa1111-1111-1111-1111-111111111111', NULL)
ON CONFLICT (id) DO NOTHING;

-- =====================================================
-- journals（仕訳）
-- =====================================================

INSERT INTO journals (id, organization_id, election_id, journal_date, description, status, submitted_by_user_id, approved_by_user_id, contact_id, classification, notes)
VALUES 
    -- 選挙台帳の仕訳
    ('dddd1111-1111-1111-1111-111111111111', NULL, 'eeee1111-1111-1111-1111-111111111111', '2024-10-01', '選挙ポスター印刷', 'approved', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'cccc2222-2222-2222-2222-222222222222', 'campaign', 'A1サイズ 500枚'),
    ('dddd1111-2222-2222-2222-222222222222', NULL, 'eeee1111-1111-1111-1111-111111111111', '2024-10-05', '個人寄附', 'approved', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'cccc1111-1111-1111-1111-111111111111', 'pre-campaign', NULL),
    ('dddd1111-3333-3333-3333-333333333333', NULL, 'eeee1111-1111-1111-1111-111111111111', '2024-10-15', '選挙事務所借り上げ', 'approved', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'cccc3333-3333-3333-3333-333333333333', 'campaign', '10/1~10/31'),
    -- 政治団体台帳の仕訳
    ('dddd2222-1111-1111-1111-111111111111', 'aaaa1111-1111-1111-1111-111111111111', NULL, '2024-04-15', '会費収入', 'approved', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'cccc4444-4444-4444-4444-444444444444', NULL, '年会費'),
    ('dddd2222-2222-2222-2222-222222222222', 'aaaa1111-1111-1111-1111-111111111111', NULL, '2024-05-01', '事務用品購入', 'approved', '00000000-0000-0000-0000-000000000001', '00000000-0000-0000-0000-000000000001', 'cccc5555-5555-5555-5555-555555555555', NULL, 'コピー用紙、文房具')
ON CONFLICT (id) DO NOTHING;

-- =====================================================
-- journal_entries（仕訳明細）
-- =====================================================

INSERT INTO journal_entries (id, journal_id, account_code, debit_amount, credit_amount)
VALUES 
    -- 選挙ポスター印刷（支出）
    ('ff001111-1111-1111-1111-111111111111', 'dddd1111-1111-1111-1111-111111111111', 'EXP_PRINTING_ELEC', 150000, 0),
    ('ff001111-1111-1111-2222-222222222222', 'dddd1111-1111-1111-1111-111111111111', 'ASSET_CASH', 0, 150000),
    -- 個人寄附（収入）
    ('ff001111-2222-2222-1111-111111111111', 'dddd1111-2222-2222-2222-222222222222', 'ASSET_CASH', 50000, 0),
    ('ff001111-2222-2222-2222-222222222222', 'dddd1111-2222-2222-2222-222222222222', 'REV_DONATION_INDIVIDUAL_ELEC', 0, 50000),
    -- 選挙事務所借り上げ（支出）
    ('ff001111-3333-3333-1111-111111111111', 'dddd1111-3333-3333-3333-333333333333', 'EXP_BUILDING_ELEC', 80000, 0),
    ('ff001111-3333-3333-2222-222222222222', 'dddd1111-3333-3333-3333-333333333333', 'ASSET_CASH', 0, 80000),
    -- 会費収入
    ('ff002222-1111-1111-1111-111111111111', 'dddd2222-1111-1111-1111-111111111111', 'ASSET_CASH', 10000, 0),
    ('ff002222-1111-1111-2222-222222222222', 'dddd2222-1111-1111-1111-111111111111', 'REV_MEMBERSHIP_FEE', 0, 10000),
    -- 事務用品購入
    ('ff002222-2222-2222-1111-111111111111', 'dddd2222-2222-2222-2222-222222222222', 'EXP_SUPPLIES', 5000, 0),
    ('ff002222-2222-2222-2222-222222222222', 'dddd2222-2222-2222-2222-222222222222', 'ASSET_CASH', 0, 5000)
ON CONFLICT (id) DO NOTHING;
